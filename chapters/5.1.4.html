<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="5.1.4&nbsp;&nbsp;
    Using a Stack to Implement Recursion
  " />
    <title>
      5.1.4&nbsp;&nbsp;
    Using a Stack to Implement Recursion
  
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

            
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html"> 
        Foreword
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./prefaces.html"> 
        Prefaces
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./acknowledgements.html"> 
Acknowledgments
    </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-4">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="false" aria-controls="sidebar-collapse-4">
                <a href="./see.html"> 
    Index Crossreferences (for proofreading)
  </a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1 
    Building Abstractions with 
    
      
      Functions
    
  </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-5" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-6">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="true" aria-controls="sidebar-collapse-6">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="true" aria-controls="sidebar-collapse-6">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1 The Elements of Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-6" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./1.1.1.html"> 1.1.1 Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-8">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                <a href="./1.1.2.html"> 1.1.2 Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.3.html"> 1.1.3 
    Evaluating
    
      
      Operator Combinations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.4.html"> 1.1.4 
    Compound 
    Functions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.5.html"> 1.1.5 
    The Substitution Model for 
    
      
      
        Function
      
    
    Application
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.6.html"> 1.1.6 
    Conditional Expressions and Predicates
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.7.html"> 1.1.7 Example: Square Roots by Newton's Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-14">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="false" aria-controls="sidebar-collapse-14">
                <a href="./1.1.8.html"> 1.1.8 
    
      
      
        Functions
      
    
    as Black-Box Abstractions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-15">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="true" aria-controls="sidebar-collapse-15">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="true" aria-controls="sidebar-collapse-15">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2 
    
      
      Functions
    
    and the Processes They Generate
  </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-15" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.2.1.html"> 1.2.1 Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.2.2.html"> 1.2.2 Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.3.html"> 1.2.3 Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.4.html"> 1.2.4 Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.5.html"> 1.2.5 Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-21">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="false" aria-controls="sidebar-collapse-21">
                <a href="./1.2.6.html"> 1.2.6 Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-22">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="true" aria-controls="sidebar-collapse-22">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="true" aria-controls="sidebar-collapse-22">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3 
        Formulating Abstractions with Higher-Order 
        
	  
	  Functions
	
      </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-22" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.3.1.html"> 1.3.1 
    
      
      Functions
    
    as Arguments
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.3.2.html"> 1.3.2 
    
      
      Constructing Functions using Lambda Expressions
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.3.html"> 1.3.3 
    
      
    Functions
    as General Methods
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-26">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="false" aria-controls="sidebar-collapse-26">
                <a href="./1.3.4.html"> 1.3.4 
    
      
      Functions
    
    as Returned Values
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2 Building Abstractions with Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-27" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-28">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="true" aria-controls="sidebar-collapse-28">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="true" aria-controls="sidebar-collapse-28">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1 Introduction to Data Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-28" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./2.1.1.html"> 2.1.1 
    Example: Arithmetic Operations for Rational Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-30">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                <a href="./2.1.2.html"> 2.1.2 
    Abstraction Barriers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.3.html"> 2.1.3 
    What Is Meant by Data?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-32">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="false" aria-controls="sidebar-collapse-32">
                <a href="./2.1.4.html"> 2.1.4 
    Extended Exercise: Interval Arithmetic
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-33">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="true" aria-controls="sidebar-collapse-33">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="true" aria-controls="sidebar-collapse-33">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2 Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-33" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.2.1.html"> 2.2.1 
    Representing Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.2.2.html"> 2.2.2 
    Hierarchical Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.3.html"> 2.2.3 
    Sequences as Conventional Interfaces
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-37">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="false" aria-controls="sidebar-collapse-37">
                <a href="./2.2.4.html"> 2.2.4 
    Example: A Picture Language
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-38">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="true" aria-controls="sidebar-collapse-38">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="true" aria-controls="sidebar-collapse-38">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3 Symbolic Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-38" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.3.1.html"> 2.3.1 
    
      
      Strings
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.3.2.html"> 2.3.2 
    Example: Symbolic Differentiation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.3.html"> 2.3.3 
    Example: Representing Sets
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-42">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="false" aria-controls="sidebar-collapse-42">
                <a href="./2.3.4.html"> 2.3.4 
    Example: Huffman Encoding Trees
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-43">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="true" aria-controls="sidebar-collapse-43">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="true" aria-controls="sidebar-collapse-43">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4 Multiple Representations for Abstract Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-43" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.4.1.html"> 2.4.1 
    Representations for Complex Numbers
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.4.2.html"> 2.4.2 
    Tagged data
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-46">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="false" aria-controls="sidebar-collapse-46">
                <a href="./2.4.3.html"> 2.4.3 
    Data-Directed Programming and Additivity
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-47">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="true" aria-controls="sidebar-collapse-47">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="true" aria-controls="sidebar-collapse-47">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5 Systems with Generic Operations</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-47" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.5.1.html"> 2.5.1 
    Generic Arithmetic Operations
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.5.2.html"> 2.5.2 
    Combining Data of Different Types
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-50">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="false" aria-controls="sidebar-collapse-50">
                <a href="./2.5.3.html"> 2.5.3 
    Example: Symbolic Algebra
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3 Modularity, Objects, and State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-51" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-52">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="true" aria-controls="sidebar-collapse-52">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="true" aria-controls="sidebar-collapse-52">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1 Assignment and Local State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-52" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./3.1.1.html"> 3.1.1 
    Local State Variables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-54">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                <a href="./3.1.2.html"> 3.1.2 
    The Benefits of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-55">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="false" aria-controls="sidebar-collapse-55">
                <a href="./3.1.3.html"> 3.1.3 
    The Costs of Introducing Assignment
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-56">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="true" aria-controls="sidebar-collapse-56">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="true" aria-controls="sidebar-collapse-56">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2 The Environment Model of Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-56" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.2.1.html"> 3.2.1 
    The Rules for Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.2.2.html"> 3.2.2 
    Applying Simple
    
      
      Functions
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.3.html"> 3.2.3 
    Frames as the Repository of Local State
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-60">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="false" aria-controls="sidebar-collapse-60">
                <a href="./3.2.4.html"> 3.2.4 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-61">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="true" aria-controls="sidebar-collapse-61">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="true" aria-controls="sidebar-collapse-61">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3 Modeling with Mutable Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-61" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.3.1.html"> 3.3.1 
    Mutable List Structure
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.3.2.html"> 3.3.2 
    Representing Queues
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-64">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                <a href="./3.3.3.html"> 3.3.3 
    Representing Tables
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.4.html"> 3.3.4 
    A Simulator for Digital Circuits
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-66">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="false" aria-controls="sidebar-collapse-66">
                <a href="./3.3.5.html"> 3.3.5 
    Propagation of Constraints
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-67">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="true" aria-controls="sidebar-collapse-67">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="true" aria-controls="sidebar-collapse-67">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4 Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-67" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.4.1.html"> 3.4.1 
    The Nature of Time in Concurrent Systems
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-69">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="false" aria-controls="sidebar-collapse-69">
                <a href="./3.4.2.html"> 3.4.2 
    Mechanisms for Controlling Concurrency
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-70">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="true" aria-controls="sidebar-collapse-70">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5 Streams</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-70" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.5.1.html"> 3.5.1 
    Streams Are Delayed Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.5.2.html"> 3.5.2 
    Infinite Streams
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-73">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="false" aria-controls="sidebar-collapse-73">
                <a href="./3.5.3.html"> 3.5.3 
    Exploiting the Stream Paradigm
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.4.html"> 3.5.4 
    Streams and Delayed Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-75">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="false" aria-controls="sidebar-collapse-75">
                <a href="./3.5.5.html"> 3.5.5 
    Modularity of Functional Programs and Modularity of Objects
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4 Metalinguistic Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-76" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-77">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="true" aria-controls="sidebar-collapse-77">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="true" aria-controls="sidebar-collapse-77">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1 The Metacircular Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-77" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./4.1.1.html"> 4.1.1 
    The Core of the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-79">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                <a href="./4.1.2.html"> 4.1.2 
    Representing
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-80">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                <a href="./4.1.3.html"> 4.1.3 
    Evaluator Data Structures
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.4.html"> 4.1.4 
    Running the Evaluator as a Program
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.5.html"> 4.1.5 
    Data as Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.6.html"> 4.1.6 
    Internal
    
      
      Declarations
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-84">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="false" aria-controls="sidebar-collapse-84">
                <a href="./4.1.7.html"> 4.1.7 
    Separating Syntactic Analysis from Execution
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-85">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="true" aria-controls="sidebar-collapse-85">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="true" aria-controls="sidebar-collapse-85">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2 
    
      
    
    Lazy Evaluation
</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-85" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.2.1.html"> 4.2.1 
    Normal Order and Applicative Order
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.2.2.html"> 4.2.2 
    An Interpreter with Lazy Evaluation
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-88">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="false" aria-controls="sidebar-collapse-88">
                <a href="./4.2.3.html"> 4.2.3 
    Streams as Lazy Lists
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-89">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="true" aria-controls="sidebar-collapse-89">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="true" aria-controls="sidebar-collapse-89">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3 
    
      
    
    Nondeterministic Computing
  </a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-89" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.3.1.html"> 4.3.1 
    
      
      Search and amb
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.3.2.html"> 4.3.2 
    Examples of Nondeterministic Programs
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-92">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="false" aria-controls="sidebar-collapse-92">
                <a href="./4.3.3.html"> 4.3.3 
    Implementing the
    
      
      amb
    
    Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-93">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="true" aria-controls="sidebar-collapse-93">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="true" aria-controls="sidebar-collapse-93">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4 Logic Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-93" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.4.1.html"> 4.4.1 
    Deductive Information Retrieval
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.4.2.html"> 4.4.2 
    How the Query System Works
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-96">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                <a href="./4.4.3.html"> 4.4.3 
    Is Logic Programming Mathematical Logic?
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-97">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="false" aria-controls="sidebar-collapse-97">
                <a href="./4.4.4.html"> 4.4.4 
    Implementing the Query System
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5 Computing with Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-98" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-99">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="true" aria-controls="sidebar-collapse-99">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="true" aria-controls="sidebar-collapse-99">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1 Designing Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-99" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./5.1.1.html"> 5.1.1 
    A Language for Describing Register Machines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-101">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="false" aria-controls="sidebar-collapse-101">
                <a href="./5.1.2.html"> 5.1.2 
    Abstraction in Machine Design
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-102">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                <a href="./5.1.3.html"> 5.1.3 
    Subroutines
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.4.html"> 5.1.4 
    Using a Stack to Implement Recursion
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-104">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="false" aria-controls="sidebar-collapse-104">
                <a href="./5.1.5.html"> 5.1.5 
    Instruction Summary
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-105">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="true" aria-controls="sidebar-collapse-105">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="true" aria-controls="sidebar-collapse-105">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2 A Register-Machine Simulator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-105" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.2.1.html"> 5.2.1 
    The Machine Model
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.2.2.html"> 5.2.2 
    The Assembler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-108">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                <a href="./5.2.3.html"> 5.2.3 
    Generating Execution
    
      
      Functions
    
    for Instructions
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-109">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="false" aria-controls="sidebar-collapse-109">
                <a href="./5.2.4.html"> 5.2.4 
    Monitoring Machine Performance
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-110">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="true" aria-controls="sidebar-collapse-110">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="true" aria-controls="sidebar-collapse-110">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3 Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-110" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.3.1.html"> 5.3.1 
    Memory as Vectors
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-112">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="false" aria-controls="sidebar-collapse-112">
                <a href="./5.3.2.html"> 5.3.2 
    Maintaining the Illusion of Infinite Memory
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-113">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="true" aria-controls="sidebar-collapse-113">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4 The Explicit-Control Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-113" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.4.1.html"> 5.4.1 
    
      
      The Dispatcher and Basic Evaluation
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.4.2.html"> 5.4.2 
        Evaluating function applications
      </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-116">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                <a href="./5.4.3.html"> 5.4.3 
    
      
      
        Blocks, Assignments, and Declarations
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-117">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="false" aria-controls="sidebar-collapse-117">
                <a href="./5.4.4.html"> 5.4.4 
    Running the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-118">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="true" aria-controls="sidebar-collapse-118">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="true" aria-controls="sidebar-collapse-118">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5 Compilation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-118" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.5.1.html"> 5.5.1 
    Structure of the Compiler
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.5.2.html"> 5.5.2 
    Compiling
    
      
      Components
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-121">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                <a href="./5.5.3.html"> 5.5.3 
    Compiling
    
      
      
	Applications
      
    
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.4.html"> 5.5.4 
    Combining Instruction Sequences
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.5.html"> 5.5.5 
    An Example of Compiled Code
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.6.html"> 5.5.6 
    Lexical Addressing
  </a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./5.5.7.html"> 5.5.7 
    Interfacing Compiled Code to the Evaluator
  </a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./references.html"> References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-127">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-127" aria-expanded="false" aria-controls="sidebar-collapse-127">
                <a href="./making-of.html"> About the SICP JS Project</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    5.1.4&nbsp;&nbsp;
    Using a Stack to Implement Recursion
  
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'>
    

  
  
  
  

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    
    With the ideas illustrated so far, we can implement any iterative
    process by specifying a register machine that has a register
    corresponding to each state variable of the process.  The machine
    repeatedly executes a controller loop, changing the contents
    of the registers, until some termination condition is satisfied.  At
    each point in the controller sequence, the state of the machine
    (representing the state of the iterative process) is completely
    determined by the contents of the registers (the values of the state
    variables).
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    
    
    
    Implementing recursive processes, however, requires an additional
    mechanism.  Consider the following recursive method for computing
    factorials, which we first examined in
    section&nbsp;<REF NAME="sec:recursion-and-iteration"><a class="superscript" id="5.1.4-sec-link-1.2.1" href="./1.2.1.html">1.2.1</a></REF>:
    <div class='snippet' id='javascript_102_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0AgQ0poCcrGAbAChIEpQAb1yhRoVgFMKRVvXoBeRaAygRY9WID8ytRvUAuUPQBUDZhTYce9ALTK+AblwBffExbsu3FI6A')">function factorial(n) {
    return n === 1 
           ? 1
           : n * factorial(n - 1);
}
</pre></div></div>

    As we see from the
    
      
      function,
    
    computing $n!$ requires computing
    $(n-1)!$.  Our GCD machine, modeled on the
    
      
      function
    
    
    <div class='snippet' id='javascript_102_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0AczIBMAKAQwBpQAjASlABvXKFGgATgFMKRcfR6gAvMtAAGUAH5Q7UAC5GLVj246ApLz4BuXAF98TNgCZV3DI6tA')">function gcd(a, b) {
    return b === 0 ? a : gcd(b, a % b);
}
</pre></div></div>

    similarly had to compute another GCD.  But there is an important
    difference between the <kbd>gcd</kbd>
    
      
      function,
    
    which reduces the original computation to a new GCD computation, and
    <kbd>factorial</kbd>, which requires computing another
    factorial as a subproblem.  In GCD, the answer to the new GCD computation is
    the answer to the original problem.  To compute the next GCD, we simply
    place the new arguments in the input registers of the GCD machine and reuse
    the machine's data paths by executing the same controller sequence.
    When the machine is finished solving the final GCD problem, it has completed
    the entire computation.
  </p></div>

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    In the case of factorial (or any recursive process) the answer to the
    new factorial subproblem is not the answer to the original problem.
    The value obtained for $(n-1)!$ must be
    multiplied by $n$ to get the final answer.  If
    we try to imitate the GCD design, and solve the factorial subproblem by
    decrementing the <kbd>n</kbd> register and rerunning the
    factorial machine, we will no longer have available the old value of
    <kbd>n</kbd> by which to multiply the result.  We thus
    need a second factorial machine to work on the subproblem.  This second
    factorial computation itself has a factorial subproblem, which
    requires a third factorial machine, and so on.  Since each factorial
    machine contains another factorial machine within it, the total
    machine contains an infinite nest of similar machines and hence cannot
    be constructed from a fixed, finite number of parts.
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    Nevertheless, we can implement the factorial process as a register
    machine if we can arrange to use the same components for each nested
    instance of the machine.  Specifically, the machine that computes
    $n!$
    should use the same components to work on the subproblem of computing
    $(n-1)!$, on the subproblem for
    $(n-2)!$, and so on.  This is
    plausible because, although the factorial process dictates that an
    unbounded number of copies of the same machine are needed to perform a
    computation, only one of these copies needs to be active at any given
    time.  When the machine encounters a recursive subproblem, it can
    suspend work on the main problem, reuse the same physical parts to
    work on the subproblem, then continue the suspended computation.
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    In the subproblem, the contents of the registers will be different
    than they were in the main problem. (In this case the
    <kbd>n</kbd> register is decremented.)  In order to be
    able to continue the suspended computation, the machine must save the
    contents of any registers that will be needed after the subproblem is
    solved so that these can be restored to continue the suspended computation.
    In the case of factorial, we will save the old value of
    <kbd>n</kbd>, to be restored when we are finished
    computing the factorial of the decremented <kbd>n</kbd>
    register.<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    Since there is no a priori limit on the depth of nested
    recursive calls, we may need to save an arbitrary number of register
    values.  These values must be restored in the reverse of the order in
    which they were saved, since in a nest of recursions the last
    subproblem to be entered is the first to be finished.  This dictates
    the use of a <EM>stack</EM>, or <QUOTE>last in, first out</QUOTE> data
    structure, to save register values.  We can extend the register-machine
    language to include a stack by adding two kinds of instructions: Values are
    placed
    
    
    
    
    on the stack using a <kbd>save</kbd> instruction and
    restored from the stack using a <kbd>restore</kbd>
    instruction.  After a sequence of values has been
    <kbd>save</kbd>d on the stack, a sequence of
    <kbd>restore</kbd>s will retrieve these values in reverse
    order.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    With the aid of the stack, we can reuse a single copy of the factorial
    machine's data paths for each factorial subproblem.  There is a
    similar design issue in reusing the controller sequence that operates
    the data paths.  To reexecute the factorial computation, the
    controller cannot simply loop back to the beginning, as with
    an iterative process, because after solving the
    $(n-1)!$ subproblem
    the machine must still multiply the result by
    $n$.  The controller
    must suspend its computation of $n!$, solve the
    $(n-1)!$ subproblem,
    then continue its computation of $n!$.  This
    view of the factorial computation suggests the use of the subroutine
    mechanism described in section&nbsp;<REF NAME="sec:subroutines"><a class="superscript" id="5.1.4-sec-link-5.1.3" href="./5.1.3.html">5.1.3</a></REF>, which
    has the controller use a
    
    <kbd>continue</kbd> register to transfer to the part of
    the sequence that solves a subproblem and then continue where it left off on
    the main problem. We can thus make a factorial subroutine that returns to
    the entry point stored in the <kbd>continue</kbd>
    register. Around each subroutine call, we save and restore
    <kbd>continue</kbd> just as we do the
    <kbd>n</kbd> register, since each <QUOTE>level</QUOTE> of
    the factorial computation will use the same
    <kbd>continue</kbd> register. That is, the factorial
    subroutine must put a new value in <kbd>continue</kbd>
    when it calls itself for a subproblem, but it will need the old value in
    order to return to the place that called it to solve a subproblem.
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    
      
      
	Figure&nbsp;<REF NAME="fig:fact-machine"><a class="superscript" id="5.1.4-fig-link-5.11" href="./5.1.4.html#fig_5.11">5.11</a></REF>
      
    
    shows the data paths and controller for
    a machine that implements the recursive
    <kbd>factorial</kbd>
    
      
      function.
    
    The machine has a stack and three registers, called
    <kbd>n</kbd>, <kbd>val</kbd>, and
    <kbd>continue</kbd>.  To simplify the data-path diagram,
    we have not named the register-assignment buttons, only the stack-operation
    buttons (<kbd>sc</kbd> and <kbd>sn</kbd>
    to save registers, <kbd>rc</kbd> and
    <kbd>rn</kbd> to restore registers).  To operate the
    machine, we put in register <kbd>n</kbd> the number whose
    factorial we wish to compute and start the machine.  When the machine
    reaches <kbd>fact_done</kbd>, the computation is finished
    and the answer will be found in the <kbd>val</kbd>
    register.  In the controller sequence, <kbd>n</kbd> and
    <kbd>continue</kbd> are saved before each recursive call
    and restored upon return from the call.  Returning from a call is
    accomplished by branching to the location stored in
    <kbd>continue</kbd>. 
    
      
      
	The register
	<kbd>continue</kbd>
      
    
    is initialized when the machine starts so that the last return will go to
    <kbd>fact_done</kbd>.  The
    <kbd>val</kbd>
    register, which holds the result of the factorial computation, is not
    saved before the recursive call, because the old contents of
    <kbd>val</kbd> is not useful after the subroutine returns.
    Only the new value, which is the value produced by the subcomputation, is
    needed.
    
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    Although in principle the factorial computation requires an infinite
    machine, the machine in
    
      
      
	figure&nbsp;<REF NAME="fig:fact-machine"><a class="superscript" id="5.1.4-fig-link-5.11" href="./5.1.4.html#fig_5.11">5.11</a></REF>
      
    
    is actually finite except for the stack, which is potentially unbounded.  Any
    particular physical implementation of a stack, however, will be of finite
    size, and this will limit the depth of recursive calls that can be handled
    by the machine.  This implementation of factorial illustrates the general
    strategy for realizing recursive algorithms as ordinary register machines
    augmented by stacks.  When a recursive subproblem is encountered, we save on
    the stack the registers whose current values will be required after the
    subproblem is solved, solve the recursive subproblem, then restore the saved
    registers and continue execution on the main problem.  The
    <kbd>continue</kbd> register must always be saved.
    Whether there are other registers that need to be saved depends on the
    particular machine, since not all recursive computations need the original
    values of registers that are modified during solution of the subproblem
    (see exercise&nbsp;<REF NAME="ex:design-reg-machines"><a class="superscript" id="5.1.4-ex-link-5.4" href="./5.1.4.html#ex_5.4">5.4</a></REF>).
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    A double recursion
  </h2></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    
    Let us examine a more complex recursive process, the tree-recursive
    computation of the Fibonacci numbers, which we introduced in
    section&nbsp;<REF NAME="sec:tree-recursion"><a class="superscript" id="5.1.4-sec-link-1.2.2" href="./1.2.2.html">1.2.2</a></REF>:
    
    <div class='snippet' id='javascript_102_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0AqgIwAoSBKUAb11D9ABOAUwpEB9egF5poAAy9+i-gH45CpYoBcoKTIzqNfVfsNaGzNqAC0oDJwDU51vRsAmdgG5cAX3yNWAGyeQA')">function fib(n) {
    return n === 0
           ? 0
           : n === 1
           ? 1
           : fib(n - 1) + fib(n - 2);
}
</pre></div></div>

    Just as with factorial, we can implement the recursive Fibonacci
    computation as a register machine with registers
    <kbd>n</kbd>, <kbd>val</kbd>,
    and <kbd>continue</kbd>.  The machine is more complex than
    the one for factorial, because there are two places in the controller
    sequence where we need to perform recursive calls—once to compute
    Fib$(n-1)$ and once to compute
    Fib$(n-2)$.  To set up for each of these calls,
    we save the registers whose values will be needed later, set the
    <kbd>n</kbd>
    register to the number whose Fib we need to compute recursively
    ($n-1$ or $n-2$), and
    assign to <kbd>continue</kbd> the entry point in the main
    sequence to which to return (<kbd>afterfib_n_1</kbd> or
    <kbd>afterfib_n_2</kbd>, respectively).  We then go to
    <kbd>fib_loop</kbd>.  When we return from the
    recursive call, the answer is in <kbd>val</kbd>.
    Figure&nbsp;<REF NAME="fig:fib-machine"><a class="superscript" id="5.1.4-fig-link-5.12" href="./5.1.4.html#fig_5.12">5.12</a></REF> shows the controller sequence
    for this machine.
    
      
      
	 
	  
        <img class="scale_factor_" src="../img_javascript/Fig5.11b.std.svg">
       
          <div class='snippet' id='javascript_102_4_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0MuigJxoBs2BTZgCgGdOARyKdynAJSgA3gEhcoBaGacKRZvTZU+FHgCJGJFuy7NdAGlADhoshIDcuAL6FSlWvQNGO3APpWRYjyerN7MklLyisqq6qAAFpwAhgAmPBSJVGxBTCEm4uIOzi7k1HSgAOYqPsrlWhTcPAC2iWRxVCScFjU+JImNEtKRCtFq9M2t7Zx6lRTVnLXa3LriPN29-QVO+MQl7qAUAJ4ADlPt2sxEbnThSiqj8UmpZyyXpSQFoEU7Vxo0NADWRCOPiOzCojX4B0aACN2BYaCdmIk3nxwkMGHRtKAAG6JNigAC8oESfD4NDIkJhcNACO4yPcqIciluMXoWh8pGSnAIk1SuLY4nRzMUAH5QNxWLw+FDYWwLLpSP8SDQAO70WlIt6gAC02uJpM4MK4yyFwtAAC4Hik0hksvz8oVtq4tWw-oDgWxEtDOFlPd62HwLH6fT0+gMIsyDFj+YT9WSKcG2KH+kGvT7GeiRrF2ZzubyePbTcKxRKaLxE8nOqAFSQuTyOslQImdXqSQIjZwTWbhZb0pkC3jNl9nXtmv9OCCwY0qNRsRPOAAPYHcniLo4WcZtDqp-2owbMqgEUA8dlR9KGHxr1dL-L77tnhixs+JC9rnz8kTXo6bbss+48SQCQAPgYJlFEccUA04UBD2PdkKyvNdbwje9MQoGCSG0PhY1dAEgR8RMeETQMmzTJM30IpCf27LN6AAwkQOePgwIUCD02g2CTz4OYFnqZhLyXL9kKLDFMPQ5hYxmHi6gaTdJi6eYZP4t8aiE6izVo49AJAqTPFECg+FWD50TYqC7zNUteDXeVFWVNVxSXZRST2Q4ThbONDWhY11M+LZih+UAxwnDV6ToATlwIL8NxaLcq2I+FEVCzC0UjNCaSOHC3Xw0FwR4EK3nCnwESEhK6RRHyH0SHZsKJZojlXBjAsScdJ3BGcqDnQqVyrOTt1I3dxDMETfzNfL3EKkLa0MqiWL-WJ6OA4kjiONgDh8doOVrbhVvacofAAK0SXE+DIMEjh0YaRsUBFovqo9FsiwbiWqh0-O+LU2yocoSFWRTFn49YqzJNRbBSqI7liTRtD0T7vvMW5eN8QGLGB5hQcdd69lhkgeMrHhsfWsSLh+MHhgh+gEmtPssgJ55ibeV7nExsoCY-edBNponXncG5M3Jq1Umpm1+0585ueuRmnV2Mogp8AmV2eaKJj6+L0rKhkLCOMhSdErF0mYGZJKqGolKaGL5LjL6cbWMMTzE17UrEnE8REcLY1Zl32fq54KrStmfB2QkRPZMawqvf2kJEsVZdDnG3xXCOlyV2Kd3TUrNQZQVf0tWWcunWcvcvSLE-XJrlbisiM2ZTSFpAlCru7ARZj0wxDP1mYLH9nYAJ8hvmRSXExBBCkteMvvhUcR1-I+5JB9sYeeFH8zLCqFuDMXsgLCF3SmH0wzR4dUA3pHGXmoneptCLu3tGTi3VdjkiCE9cpNe15eHwMZJ2rKIkL+bugv5vGvhQHynEQ6JQKleT+393g60dliaBBVA61TPkVCB4146RUQe4Ia488Hdl6hXXc6ckpVxovzWuy98HMibj4Nehkn6JBfqJQB41u4O2oWaAeL555aw3mPTh4FZqmQEFQxQllgHymhCkfYnAsR03FvQXUHkOzLGEcfaW9A-7ZFrDAm4mkoY6F0H-eG2Drh2F8szLRcj-66KAX-QmYsSbL00pTQWto0g2McS8EmxlhyaKai1aESJyBxCvorMuKd+pp1AIw5hS96663QlyLERJgk8LCSknQPtZpgO4ghQSWThK-gfExTKeEPRkSIpXVO5ElwESqUU3u4NWRaUaokwRMEjw8B3oYPePA4nFM6Y3Veu9W4bwsExZpnCRHQQ6cMhQ3Ch58NHrNTpzgFmTxMpBUR8yFASIiboaRjZ0mhIwk4rUyi2yeW8uo-xAVTmtGqf6fR-NDF6EeXEeGiYPhMxPvQT5Pgsk8EBQo5xiTXGPGFlkUFXNfEWI0QFdk6RyiVGSAROo2RGhHDoPpLeCQfAop1ppdkRwMi8EYNi3FhhJAADJaUCyxTijoNLCQEl-gSlFU8rEIx4IDV5rT3m6BqPDflFi-kBPZCbf64UhLSDmmybiKK0UYuhtZasIrfnTz2NKvihVVJIXlZCqmHiZq+W1WUZ8hgBxsBEAK+4QqrUUHhmzLVPLTxoRfLMRCN4jX82RUwlV7z1X6E9YYNRlj-lJK9YVNmcqpAKsZULM19yXRVP5X6wVmLdCJlFWGN1Ub4JkVlYahNJKlWBs4Oi4NSdqy5oLQEgplT-TxsTW46FalxVSwCsVDNZa3nZoRHmjYXb3XcVjiW31EL-XcTJVQKyvr6UwQraiqtqqdDtqQvKIdQ4LXqnQWHepxUEThXtbEdtQt20nqog2ntB645HsSlNPKy4p2JqFtem8Xa92BInOUGghKAMKzErfFWNTQAJPRA+LJkkAMUAA8CnJ6I8kNP9LKppYiFClLEjVJsWVm0+meTEptqHCNNLWS0-82kV62PqOMrWkycM+VmV0uC3FdW+CvBhvZSSEZG1mBx3ghCFKI2UvU1S5GRI12o7Q+hEyKijL6eMmoHDWI7LmSJA5IHqzHIqHBmg5yfGXNbAaVRzHEVan-YBojApM0OuzVZ+D3yyK3ss-poFNienubBQzeVfNWkXo8Y5gDPmeZ+O7VqHF9VtAtH+MS-mMWyD-D0FFtRWweVHCIHwOI-B0hJc7p7eLrTEvJd0Jl7LywbV2u5VG2WfAjrzkihE4Tlg8v-FfjrB8NR+PSX+mbcuKM2veNxoDYBqnE2UJ4w3crOWSsWF6XR9eKnpl9yWbwke2sKMNy2RKgKssnLweUOE7TLW5sQbfokrr8weuCf61Ekrw2bb9DGz5aT7TLojVk2Mpb8xNbFRK+N-Ba2JwrM20fGZNWAn1bnL9coZ6NDZuh52ETrmdU2LLFMFTdnIbZoOxj+GKnR1Roe88EbtsSdwt89OgLUKhYU4uWFyHe3UGIgIGWRox2b6RLvuBh+HX35pRaFqIkrP2dyx+GN3J3TwHq0PfVIXYXMO8YV2FZBv60Gy4fRFfGPxQOdA+wszh9971kI0hQ6jCaDcNxVzjdhCLDfElnjwkHG2BHrOEeppXWmudHJkaL5gjRDP0z2Fc0zXlOzmdTXsf3EIbfw6bNmmP8M49E4CTH8XQD0+heuC4-mgX+xZ8p4zizo5UGLk4GQIgSD-mSOiQGPXFgrfDIY7E5+g3YsJT3NT+4rlTj2zZUSXQ2NdAfejqg+WTWTvmzA8Q9KJFR4fd7McPv2hALsurCY0f6uHHAa5y143j82-nazldJfJwxsD50yE1oI+G5j6CdfsJu+KAN7r4fphHXF-7GXxf9lg-gu35XT35-rubP6v6qwL4Nxn4r4gKX66BI6AEjTAF+ANac4v7c59RnaQGn7f7n4+xwF47KCIG-jIGEGNa16nZtaf5QG4EwFr6D5I4+DNDMDjimBb51aoHMGsFXyUEd7H5f696-7r7Cro5HZcFLDsGoJkFMGJAsGcaRS8H5b8E0GCH4F-7VhJ6SEtTp5gEYFEIxIIjz7axf7e7oE1hKiqhshF5lC97uTXJmZM5aiyzZ4-Sk6oygy56tJzq8BuE0AgxVgkBEAcC7rurWE4zuF0GeH3DtpIa7ZaguECQV5V5sKkAX7d6xBCyxE-q0IJHl6V7V6uHaagjkg6y0KZFFGsBg4l5lBAjJDIgThMTAIkSqyEKdZpRaw3Z-R8R3YWxlZkBpbwLoRxKdGiY9F9S6BxIDGKAPglaxiEJ6AlZTFYZpSGFzHT5TC6APxLGJps7KQxQ8DBxOyLQ5FhGJH5EpE-QG6KwG6yx5HJGq414JERFja4IO59wtHrGvyvFvFXRxLt5KGGH5DfHChTKOGl4tQISGDMAHA2aViMZYRFb3DeGwnIyGYZhR5lCLgsBC6kYBg6JeAmAKS2AdThj+b3DsiBEcD4m5DcAn5IG3DEkw6UlyigDMl0nZwOTYmUC4ltweLBDGC0mN74JNG1J7iLRTZXQPgdALjepcD9CGCxjtr8mhArYNzlp+AsC7R8pYmXhyn6TsmG5ijKCMkwEkRN6G7ImyyQksAwnSmymGh4rg4-HOlmhTJCkunjzET5Dmk0HGmcAkmLzkpmwtQuHakym6kOk0rukekNxuk+nDJen254KOC7o-r2Hh7UkCnMB66ImxBYlIjcnESZmhDAnMgilv4W4fa1H1HeKGRMSik5lbbVz+o4ZNkplgmnwtQlb0SJJcDoSzFEjMmzR9mxJIj9CxhDnogZZZZhLiG8BwKKAEBjnQQi5BlnZLn5pNmaS6DJC4q6DqLMgZYnpzk9kiQDmMobkjoiSXkrn7AeI3krbbm7kdD7kmRTlRozY8ALi8y-jnnIkLj-FxZJlm6tI7l7kHmLkfnFQLkKAobMm5axZDJXQSK6CGjnQHCtaxbuSpYrYsYSnLFOzwYZREjtoA5Nk0Jtaxh05taqmUYZEIhtlvmHmFokDtR4hUAABeUwMFmFSWE5QRbAW5-MYFL5EFCgPKX8fAZKFATy-QpITCpJv4mkcl9WlQcBM2xBd+EGM55pOcciqlK5whqW5pYoUWAEulgU+lCl6lM5MhchbB+CpltlJ5BpOBKl1l6hZWx5shrBmlQBEG3l9l5l+Cel8lalnl7QbFmgXFfl9JkV1A7FXFwVeCloEi7llQNkJAFh9kyg1gWIyiix5mzZrSkl0lrQHZYwqCjBc5PBnxvF7Wx+UR80lZnSM2dlrBCFSWtFI0wOC8qy8ZO2P6+2ohE4NVK4ihDVkGxVVG72rVgVHVZF8ZiyTuyyruwFyZFVlgnBPlDQ8eQq1VO1pgqOZQ0hLl2OCO0MIh2gGO7VSwWqP6UWt1UoNFTV9A3ZXlwIc5aWcR0ezlh1nVcWr19VKWf19l31EW4JE4t2fa6II59CsYugAAVKQNjFWoja+cxQEqVciLJVZZUDxcpXjYZf-ioLFSQaJItnwBZelcTdWE3GTd2GKGzO0hTXvLGGzF2iFeKMwJKE0ETZldlfQLlSIPlXqMNaJtsRsnRfQNjTJXEJtW2OSDwOOAcESWWMkF3mSdmNxPBcaeraiFvrmPWFWiYcIHiMrZwKrYyu2nrcwBrfkK5cWIyrbfbV-orRSCrVvB4i7aiKmTygtv0oJrmULV0Q0LoDMODTyl9kpj9qJgVraopdLQjKbPAaTSsK6ptbLB0CqDIeXKeYMedmsS1Ldn0dsQ+MMSgsXaHbwBMc-GXWlOeXVm1gBMOSoPsASk8UIAELYPxRwK3ehBQASqsUSO8kKvFVQIlROIsdGT8ZQu9ePZPcsONiOYJoSl6FwDhJikKlrPDKPEGNmpMRYIMpsO+QEniK6GQDWdDfmkrihkbfmO7XymGCJkpGveHg7Urs2aJm-RvaufOkRJiqieLabPyoNEtdQqvekO-W2Z7vhdzbzaiboI0EEdQCtBhXWLyMnf9NscyFLSBfcCIaJsSBwOSPUckBjeBKfQFLhO6L1t0TDSUn7HiO7KSEraiZA+vfYFJjOptBgw2Dao7eTRIog7ZJYVg3xF2ClUmh4vaEVZBQEncfUPnahE7GUkSAHfRptsHNLjrQJU0UhSNE+eBSJHhVcacYoxcTwDEUxisN1Ymoo9xYxbg1Q1qLLbjWFYnWaFHfrDoDxTQoppTfJoPQ0acf4DYFw33JpA4y3SY9w60jTXATFswM6iZZhck8lePKFQZXAc8Ofd4sHmFGE2IAzWaGKFYCzcE-k4on4F3eE7GFYJzVIwk55efaQ-UHQxIY5cQxfVfdXdTUTXAVJIJiU07TQ-hIJv0x4zk2JHk1sak8PXXO3cFEcLhokMtKIILEPSs53lqlzc08IYsakyVpM9k55XM105U4YRZWlfzdWKIzlbU6LXoZLVrTLVoGVfLdUZVS1PMavYDCRIYRYMqXkALk7IQkXRONnbnbFDE4eWWJePsX82GI1PGfMUPiQ5fe08MysEixsDPYY9XZWKbnoXoLkxwBrhnJiJVoCbNGi2S0mJ3dYMU4I4oPjGHlwMWYSXoeNspesZtUkzoK0UDWiwK5HVGkM4S3Ji1ri544mho+vBK6MdK4S6AxjMTsbJK99oZMq9-aia6svNHYE4q6bDq6-fyvHdVq89WM+Z2FPOXULmWBPUmMaWoHwCSXQjkFmUHLgMCw0JEO8maKaNjHoJ4O0CIM5i2hMTiTa0vRYCADRqAECLEu0Mw+iFG4WX8EcPDDGfG5pCkMkE5FTWaNou8sVLoASMsCJnoCQJW9GtahgA7aWaAJ8jZh8iSBOJfQILG6aPG+AG3Um7sQya6ySQwOfc2xhdDrtNWDW8SLWNWKG4EZ2GgD22AH2+hEm6GoYGG52JYAZoPciEsxiNilXklKACqJkPiAuyICu8SOhEPgQHqgQELroGewkFogkJYEQMEn4dQB0AqnwMu2aEjiG0wNu5W6aMB7oDW2A1ws5N9NW98pimW9qLW6pFB7W06jwA20CUG3Bz9Ju7++G7UjDA+74E+5QN22aMFq2+m7MLhFmzh8yPe4+8+022QQhzB8KOxwR2B5x-3Hh3oPyIh9DGW+jU9Gh9B1W7oEJ42woPG9J3iC+3ZBTRkJhKyXytqA2wAISmjUdodXsR5PS-i5v8zwajuhBpvSICB0LtvmC4duvwcKdsCmJho6DYcWDMjxtWfQSducCWgYBaexgYC6f6aw4gdbuLuxsjQmetJmeX0WdMfkezAxvem4AOAyAKA+tpRJeOt4hzCV7MBuudTgsEjoiyzzEiRCo1vyhCfygGfge-ij3ZoVsWD4wWDQjUaJCX4ddNvdhCro2teJDtedegCI3Nt8dXRCooeDfDeNRdd6gdcTeOwEm+BFO2ADIOtgh5cuuFfuu+thAn20Kr1yY5dbfOtJG7fFd1XocWDYCbACsbeUC5fncFdFejXrGbDGsyonebdOv5fDtXcDbVgyd2BAA')">controller(
  list(      
      assign("continue", label("fact_done")), // set up final 
    "fact_loop",                              // return address
      test(list(op("="), reg("n"), constant(1))),
      branch(label("base_case")),
      // Set up for recursive call by saving "n" and "continue".
      // Set up "continue" so that the computation will continue
      // at "after_fact" when the subroutine returns.
      save("continue"),
      save("n"),
      assign("n", list(op("-"), reg("n"), constant(1))),
      assign("continue", label("after_fact")),
      go_to(label("fact_loop")),
    "after_fact",
      restore("n"),
      restore("continue"),
      assign("val", list(op("*"), reg("n"), reg("val"))),  // "val" now contains n(n-1)!
      go_to(reg("continue")),         // return to caller
    "base_case",
      assign("val", constant(1)),     // base case: 1! = 1
      go_to(reg("continue")),         // return to caller
    "fact_done"))
</pre></div></div>
	  
      
	  
      
      
	
    <FIGURE>
      <img class="scale_factor_" id="fig_5.11" src="../img_javascript/Fig5.11b.std.svg"><div class='snippet' id='javascript_102_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0MuigJxoBs2BTZgCgGdOARyKdynAJSgA3gEhcoBaGacKRZvTZU+FHgCJGJFuy7NdAGlADhoshIDcuAL6FSlWvQNGO3APpWRYjyerN7MklLyisqq6qAAFpwAhgAmPBSJVGxBTCEm4uIOzi7k1HSgAOYqPsrlWhTcPAC2iWRxVCScFjU+JImNEtKRCtFq9M2t7Zx6lRTVnLXa3LriPN29-QVO+MQl7qAUAJ4ADlPt2sxEbnThSiqj8UmpZyyXpSQFoEU7Vxo0NADWRCOPiOzCojX4B0aACN2BYaCdmIk3nxwkMGHRtKAAG6JNigAC8oESfD4NDIkJhcNACO4yPcqIciluMXoWh8pGSnAIk1SuLY4nRzMUAH5QNxWLw+FDYWwLLpSP8SDQAO70WlIt6gAC02uJpM4MK4yyFwtAAC4Hik0hksvz8oVtq4tWw-oDgWxEtDOFlPd62HwLH6fT0+gMIsyDFj+YT9WSKcG2KH+kGvT7GeiRrF2ZzubyePbTcKxRKaLxE8nOqAFSQuTyOslQImdXqSQIjZwTWbhZb0pkC3jNl9nXtmv9OCCwY0qNRsRPOAAPYHcniLo4WcZtDqp-2owbMqgEUA8dlR9KGHxr1dL-L77tnhixs+JC9rnz8kTXo6bbss+48SQCQAPgYJlFEccUA04UBD2PdkKyvNdbwje9MQoGCSG0PhY1dAEgR8RMeETQMmzTJM30IpCf27LN6AAwkQOePgwIUCD02g2CTz4OYFnqZhLyXL9kKLDFMPQ5hYxmHi6gaTdJi6eYZP4t8aiE6izVo49AJAqTPFECg+FWD50TYqC7zNUteDXeVFWVNVxSXZRST2Q4ThbONDWhY11M+LZih+UAxwnDV6ToATlwIL8NxaLcq2I+FEVCzC0UjNCaSOHC3Xw0FwR4EK3nCnwESEhK6RRHyH0SHZsKJZojlXBjAsScdJ3BGcqDnQqVyrOTt1I3dxDMETfzNfL3EKkLa0MqiWL-WJ6OA4kjiONgDh8doOVrbhVvacofAAK0SXE+DIMEjh0YaRsUBFovqo9FsiwbiWqh0-O+LU2yocoSFWRTFn49YqzJNRbBSqI7liTRtD0T7vvMW5eN8QGLGB5hQcdd69lhkgeMrHhsfWsSLh+MHhgh+gEmtPssgJ55ibeV7nExsoCY-edBNponXncG5M3Jq1Umpm1+0585ueuRmnV2Mogp8AmV2eaKJj6+L0rKhkLCOMhSdErF0mYGZJKqGolKaGL5LjL6cbWMMTzE17UrEnE8REcLY1Zl32fq54KrStmfB2QkRPZMawqvf2kJEsVZdDnG3xXCOlyV2Kd3TUrNQZQVf0tWWcunWcvcvSLE-XJrlbisiM2ZTSFpAlCru7ARZj0wxDP1mYLH9nYAJ8hvmRSXExBBCkteMvvhUcR1-I+5JB9sYeeFH8zLCqFuDMXsgLCF3SmH0wzR4dUA3pHGXmoneptCLu3tGTi3VdjkiCE9cpNe15eHwMZJ2rKIkL+bugv5vGvhQHynEQ6JQKleT+393g60dliaBBVA61TPkVCB4146RUQe4Ia488Hdl6hXXc6ckpVxovzWuy98HMibj4Nehkn6JBfqJQB41u4O2oWaAeL555aw3mPTh4FZqmQEFQxQllgHymhCkfYnAsR03FvQXUHkOzLGEcfaW9A-7ZFrDAm4mkoY6F0H-eG2Drh2F8szLRcj-66KAX-QmYsSbL00pTQWto0g2McS8EmxlhyaKai1aESJyBxCvorMuKd+pp1AIw5hS96663QlyLERJgk8LCSknQPtZpgO4ghQSWThK-gfExTKeEPRkSIpXVO5ElwESqUU3u4NWRaUaokwRMEjw8B3oYPePA4nFM6Y3Veu9W4bwsExZpnCRHQQ6cMhQ3Ch58NHrNTpzgFmTxMpBUR8yFASIiboaRjZ0mhIwk4rUyi2yeW8uo-xAVTmtGqf6fR-NDF6EeXEeGiYPhMxPvQT5Pgsk8EBQo5xiTXGPGFlkUFXNfEWI0QFdk6RyiVGSAROo2RGhHDoPpLeCQfAop1ppdkRwMi8EYNi3FhhJAADJaUCyxTijoNLCQEl-gSlFU8rEIx4IDV5rT3m6BqPDflFi-kBPZCbf64UhLSDmmybiKK0UYuhtZasIrfnTz2NKvihVVJIXlZCqmHiZq+W1WUZ8hgBxsBEAK+4QqrUUHhmzLVPLTxoRfLMRCN4jX82RUwlV7z1X6E9YYNRlj-lJK9YVNmcqpAKsZULM19yXRVP5X6wVmLdCJlFWGN1Ub4JkVlYahNJKlWBs4Oi4NSdqy5oLQEgplT-TxsTW46FalxVSwCsVDNZa3nZoRHmjYXb3XcVjiW31EL-XcTJVQKyvr6UwQraiqtqqdDtqQvKIdQ4LXqnQWHepxUEThXtbEdtQt20nqog2ntB645HsSlNPKy4p2JqFtem8Xa92BInOUGghKAMKzErfFWNTQAJPRA+LJkkAMUAA8CnJ6I8kNP9LKppYiFClLEjVJsWVm0+meTEptqHCNNLWS0-82kV62PqOMrWkycM+VmV0uC3FdW+CvBhvZSSEZG1mBx3ghCFKI2UvU1S5GRI12o7Q+hEyKijL6eMmoHDWI7LmSJA5IHqzHIqHBmg5yfGXNbAaVRzHEVan-YBojApM0OuzVZ+D3yyK3ss-poFNienubBQzeVfNWkXo8Y5gDPmeZ+O7VqHF9VtAtH+MS-mMWyD-D0FFtRWweVHCIHwOI-B0hJc7p7eLrTEvJd0Jl7LywbV2u5VG2WfAjrzkihE4Tlg8v-FfjrB8NR+PSX+mbcuKM2veNxoDYBqnE2UJ4w3crOWSsWF6XR9eKnpl9yWbwke2sKMNy2RKgKssnLweUOE7TLW5sQbfokrr8weuCf61Ekrw2bb9DGz5aT7TLojVk2Mpb8xNbFRK+N-Ba2JwrM20fGZNWAn1bnL9coZ6NDZuh52ETrmdU2LLFMFTdnIbZoOxj+GKnR1Roe88EbtsSdwt89OgLUKhYU4uWFyHe3UGIgIGWRox2b6RLvuBh+HX35pRaFqIkrP2dyx+GN3J3TwHq0PfVIXYXMO8YV2FZBv60Gy4fRFfGPxQOdA+wszh9971kI0hQ6jCaDcNxVzjdhCLDfElnjwkHG2BHrOEeppXWmudHJkaL5gjRDP0z2Fc0zXlOzmdTXsf3EIbfw6bNmmP8M49E4CTH8XQD0+heuC4-mgX+xZ8p4zizo5UGLk4GQIgSD-mSOiQGPXFgrfDIY7E5+g3YsJT3NT+4rlTj2zZUSXQ2NdAfejqg+WTWTvmzA8Q9KJFR4fd7McPv2hALsurCY0f6uHHAa5y143j82-nazldJfJwxsD50yE1oI+G5j6CdfsJu+KAN7r4fphHXF-7GXxf9lg-gu35XT35-rubP6v6qwL4Nxn4r4gKX66BI6AEjTAF+ANac4v7c59RnaQGn7f7n4+xwF47KCIG-jIGEGNa16nZtaf5QG4EwFr6D5I4+DNDMDjimBb51aoHMGsFXyUEd7H5f696-7r7Cro5HZcFLDsGoJkFMGJAsGcaRS8H5b8E0GCH4F-7VhJ6SEtTp5gEYFEIxIIjz7axf7e7oE1hKiqhshF5lC97uTXJmZM5aiyzZ4-Sk6oygy56tJzq8BuE0AgxVgkBEAcC7rurWE4zuF0GeH3DtpIa7ZaguECQV5V5sKkAX7d6xBCyxE-q0IJHl6V7V6uHaagjkg6y0KZFFGsBg4l5lBAjJDIgThMTAIkSqyEKdZpRaw3Z-R8R3YWxlZkBpbwLoRxKdGiY9F9S6BxIDGKAPglaxiEJ6AlZTFYZpSGFzHT5TC6APxLGJps7KQxQ8DBxOyLQ5FhGJH5EpE-QG6KwG6yx5HJGq414JERFja4IO59wtHrGvyvFvFXRxLt5KGGH5DfHChTKOGl4tQISGDMAHA2aViMZYRFb3DeGwnIyGYZhR5lCLgsBC6kYBg6JeAmAKS2AdThj+b3DsiBEcD4m5DcAn5IG3DEkw6UlyigDMl0nZwOTYmUC4ltweLBDGC0mN74JNG1J7iLRTZXQPgdALjepcD9CGCxjtr8mhArYNzlp+AsC7R8pYmXhyn6TsmG5ijKCMkwEkRN6G7ImyyQksAwnSmymGh4rg4-HOlmhTJCkunjzET5Dmk0HGmcAkmLzkpmwtQuHakym6kOk0rukekNxuk+nDJen254KOC7o-r2Hh7UkCnMB66ImxBYlIjcnESZmhDAnMgilv4W4fa1H1HeKGRMSik5lbbVz+o4ZNkplgmnwtQlb0SJJcDoSzFEjMmzR9mxJIj9CxhDnogZZZZhLiG8BwKKAEBjnQQi5BlnZLn5pNmaS6DJC4q6DqLMgZYnpzk9kiQDmMobkjoiSXkrn7AeI3krbbm7kdD7kmRTlRozY8ALi8y-jnnIkLj-FxZJlm6tI7l7kHmLkfnFQLkKAobMm5axZDJXQSK6CGjnQHCtaxbuSpYrYsYSnLFOzwYZREjtoA5Nk0Jtaxh05taqmUYZEIhtlvmHmFokDtR4hUAABeUwMFmFSWE5QRbAW5-MYFL5EFCgPKX8fAZKFATy-QpITCpJv4mkcl9WlQcBM2xBd+EGM55pOcciqlK5whqW5pYoUWAEulgU+lCl6lM5MhchbB+CpltlJ5BpOBKl1l6hZWx5shrBmlQBEG3l9l5l+Cel8lalnl7QbFmgXFfl9JkV1A7FXFwVeCloEi7llQNkJAFh9kyg1gWIyiix5mzZrSkl0lrQHZYwqCjBc5PBnxvF7Wx+UR80lZnSM2dlrBCFSWtFI0wOC8qy8ZO2P6+2ohE4NVK4ihDVkGxVVG72rVgVHVZF8ZiyTuyyruwFyZFVlgnBPlDQ8eQq1VO1pgqOZQ0hLl2OCO0MIh2gGO7VSwWqP6UWt1UoNFTV9A3ZXlwIc5aWcR0ezlh1nVcWr19VKWf19l31EW4JE4t2fa6II59CsYugAAVKQNjFWoja+cxQEqVciLJVZZUDxcpXjYZf-ioLFSQaJItnwBZelcTdWE3GTd2GKGzO0hTXvLGGzF2iFeKMwJKE0ETZldlfQLlSIPlXqMNaJtsRsnRfQNjTJXEJtW2OSDwOOAcESWWMkF3mSdmNxPBcaeraiFvrmPWFWiYcIHiMrZwKrYyu2nrcwBrfkK5cWIyrbfbV-orRSCrVvB4i7aiKmTygtv0oJrmULV0Q0LoDMODTyl9kpj9qJgVraopdLQjKbPAaTSsK6ptbLB0CqDIeXKeYMedmsS1Ldn0dsQ+MMSgsXaHbwBMc-GXWlOeXVm1gBMOSoPsASk8UIAELYPxRwK3ehBQASqsUSO8kKvFVQIlROIsdGT8ZQu9ePZPcsONiOYJoSl6FwDhJikKlrPDKPEGNmpMRYIMpsO+QEniK6GQDWdDfmkrihkbfmO7XymGCJkpGveHg7Urs2aJm-RvaufOkRJiqieLabPyoNEtdQqvekO-W2Z7vhdzbzaiboI0EEdQCtBhXWLyMnf9NscyFLSBfcCIaJsSBwOSPUckBjeBKfQFLhO6L1t0TDSUn7HiO7KSEraiZA+vfYFJjOptBgw2Dao7eTRIog7ZJYVg3xF2ClUmh4vaEVZBQEncfUPnahE7GUkSAHfRptsHNLjrQJU0UhSNE+eBSJHhVcacYoxcTwDEUxisN1Ymoo9xYxbg1Q1qLLbjWFYnWaFHfrDoDxTQoppTfJoPQ0acf4DYFw33JpA4y3SY9w60jTXATFswM6iZZhck8lePKFQZXAc8Ofd4sHmFGE2IAzWaGKFYCzcE-k4on4F3eE7GFYJzVIwk55efaQ-UHQxIY5cQxfVfdXdTUTXAVJIJiU07TQ-hIJv0x4zk2JHk1sak8PXXO3cFEcLhokMtKIILEPSs53lqlzc08IYsakyVpM9k55XM105U4YRZWlfzdWKIzlbU6LXoZLVrTLVoGVfLdUZVS1PMavYDCRIYRYMqXkALk7IQkXRONnbnbFDE4eWWJePsX82GI1PGfMUPiQ5fe08MysEixsDPYY9XZWKbnoXoLkxwBrhnJiJVoCbNGi2S0mJ3dYMU4I4oPjGHlwMWYSXoeNspesZtUkzoK0UDWiwK5HVGkM4S3Ji1ri544mho+vBK6MdK4S6AxjMTsbJK99oZMq9-aia6svNHYE4q6bDq6-fyvHdVq89WM+Z2FPOXULmWBPUmMaWoHwCSXQjkFmUHLgMCw0JEO8maKaNjHoJ4O0CIM5i2hMTiTa0vRYCADRqAECLEu0Mw+iFG4WX8EcPDDGfG5pCkMkE5FTWaNou8sVLoASMsCJnoCQJW9GtahgA7aWaAJ8jZh8iSBOJfQILG6aPG+AG3Um7sQya6ySQwOfc2xhdDrtNWDW8SLWNWKG4EZ2GgD22AH2+hEm6GoYGG52JYAZoPciEsxiNilXklKACqJkPiAuyICu8SOhEPgQHqgQELroGewkFogkJYEQMEn4dQB0AqnwMu2aEjiG0wNu5W6aMB7oDW2A1ws5N9NW98pimW9qLW6pFB7W06jwA20CUG3Bz9Ju7++G7UjDA+74E+5QN22aMFq2+m7MLhFmzh8yPe4+8+022QQhzB8KOxwR2B5x-3Hh3oPyIh9DGW+jU9Gh9B1W7oEJ42woPG9J3iC+3ZBTRkJhKyXytqA2wAISmjUdodXsR5PS-i5v8zwajuhBpvSICB0LtvmC4duvwcKdsCmJho6DYcWDMjxtWfQSducCWgYBaexgYC6f6aw4gdbuLuxsjQmetJmeX0WdMfkezAxvem4AOAyAKA+tpRJeOt4hzCV7MBuudTgsEjoiyzzEiRCo1vyhCfygGfge-ij3ZoVsWD4wWDQjUaJCX4ddNvdhCro2teJDtedegCI3Nt8dXRCooeDfDeNRdd6gdcTeOwEm+BFO2ADIOtgh5cuuFfuu+thAn20Kr1yY5dbfOtJG7fFd1XocWDYCbACsbeUC5fncFdFejXrGbDGsyonebdOv5fDtXcDbVgyd2BAA')">controller(
  list(      
      assign("continue", label("fact_done")), // set up final 
    "fact_loop",                              // return address
      test(list(op("="), reg("n"), constant(1))),
      branch(label("base_case")),
      // Set up for recursive call by saving "n" and "continue".
      // Set up "continue" so that the computation will continue
      // at "after_fact" when the subroutine returns.
      save("continue"),
      save("n"),
      assign("n", list(op("-"), reg("n"), constant(1))),
      assign("continue", label("after_fact")),
      go_to(label("fact_loop")),
    "after_fact",
      restore("n"),
      restore("continue"),
      assign("val", list(op("*"), reg("n"), reg("val"))),  // "val" now contains n(n-1)!
      go_to(reg("continue")),         // return to caller
    "base_case",
      assign("val", constant(1)),     // base case: 1! = 1
      go_to(reg("continue")),         // return to caller
    "fact_done"))
</pre></div></div>
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./5.1.4.html#fig_5.11">Figure 5.11 </a></b>A recursive factorial machine.
      
      </div>
    </FIGURE>
  
      
    
    
    
      <div class='snippet' id='javascript_102_6_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0MuigJxoBs2BTZgCgGdOARyKdynAJSgA3gEhcoBaGacKRZvTZU+FHgCJGJFuy7NdAGlADhoshIDcuAL6FSlWvQNGO3APpWRYjyerN7MklLyisqq6qAAFpwAhgAmPBSJVGxBTCEm4uIOzi7k1HSgAOYqPsrlWhTcPAC2iWRxVCScFjU+JImNEtKRCtFq9M2t7Zx6lRTVnLXa3LriPN29-QVO+MQl7qAUAJ4ADlPt2sxEbnThSiqj8UmpZyyXpSQFoEU7Vxo0NADWRCOPiOzCojX4B0aACN2BYaCdmIk3nxwkMGHRtKAAG6JNigAC8oESfD4NDIkJhcNACO4yPcqIciluMXoWh8pGSnAIk1SuLY4nRzMUAH5QNxWLw+FDYWwLLpSP8SDQAO70WlIt6gAC02uJpM4MK4yyFwtAAC4Hik0hksvz8oVtq4tWw-oDgWxEtDOFlPd62HwLH6fT0+gMIsyDFj+YT9WSKcG2KH+kGvT7GeiRrF2ZzubyePbTcKxRKaLxE8nOqAFSQuTyOslQImdXqSQIjZwTWbhZb0pkC3jNl9nXtmv9OCCwY0qNRsRPOAAPYHcniLo4WcZtDqp-2owbMqgEUA8dlR9KGHxr1dL-L77tnhixs+JC9rnz8kTXo6bbss+48SQCQAPgYJlFEccUA04UBD2PdkKyvNdbwje9MQoGCSG0PhY1dAEgR8RMeETQMmzTJM30IpCf27LN6AAwkQOePgwIUCD02g2CTz4OYFnqZhLyXL9kKLDFMPQ5hYxmHi6gaTdJi6eYZP4t8aiE6izVo49AJAqTPFECg+FWD50TYqC7zNUteDXeVFWVNVxSXZRST2Q4ThbONDWhY11M+LZih+UAxwnDV6ToATlwIL8NxaLcq2I+FEVCzC0UjNCaSOHC3Xw0FwR4EK3nCnwESEhK6RRHyH0SHZsKJZojlXBjAsScdJ3BGcqDnQqVyrOTt1I3dxDMETfzNfL3EKkLa0MqiWL-WJ6OA4kjiONgDh8doOVrbhVvacofAAK0SXE+DIMEjh0YaRsUBFovqo9FsiwbiWqh0-O+LU2yocoSFWRTFn49YqzJNRbBSqI7liTRtD0T7vvMW5eN8QGLGB5hQcdd69lhkgeMrHhsfWsSLh+MHhgh+gEmtPssgJ55ibeV7nExsoCY-edBNponXncG5M3Jq1Umpm1+0585ueuRmnV2Mogp8AmV2eaKJj6+L0rKhkLCOMhSdErF0mYGZJKqGolKaGL5LjL6cbWMMTzE17UrEnE8REcLY1Zl32fq54KrStmfB2QkRPZMawqvf2kJEsVZdDnG3xXCOlyV2Kd3TUrNQZQVf0tWWcunWcvcvSLE-XJrlbisiM2ZTSFpAlCru7ARZj0wxDP1mYLH9nYAJ8hvmRSXExBBCkteMvvhUcR1-I+5JB9sYeeFH8zLCqFuDMXsgLCF3SmH0wzR4dUA3pHGXmoneptCLu3tGTi3VdjkiCE9cpNe15eHwMZJ2rKIkL+bugv5vGvhQHynEQ6JQKleT+393g60dliaBBVA61TPkVCB4146RUQe4Ia488Hdl6hXXc6ckpVxovzWuy98HMibj4Nehkn6JBfqJQB41u4O2oWaAeL555aw3mPTh4FZqmQEFQxQllgHymhCkfYnAsR03FvQXUHkOzLGEcfaW9A-7ZFrDAm4mkoY6F0H-eG2Drh2F8szLRcj-66KAX-QmYsSbL00pTQWto0g2McS8EmxlhyaKai1aESJyBxCvorMuKd+pp1AIw5hS96663QlyLERJgk8LCSknQPtZpgO4ghQSWThK-gfExTKeEPRkSIpXVO5ElwESqUU3u4NWRaUaokwRMEjw8B3oYPePA4nFM6Y3Veu9W4bwsExZpnCRHQQ6cMhQ3Ch58NHrNTpzgFmTxMpBUR8yFASIiboaRjZ0mhIwk4rUyi2yeW8uo-xAVTmtGqf6fR-NDF6EeXEeGiYPhMxPvQT5Pgsk8EBQo5xiTXGPGFlkUFXNfEWI0QFdk6RyiVGSAROo2RGhHDoPpLeCQfAop1ppdkRwMi8EYNi3FhhJAADJaUCyxTijoNLCQEl-gSlFU8rEIx4IDV5rT3m6BqPDflFi-kBPZCbf64UhLSDmmybiKK0UYuhtZasIrfnTz2NKvihVVJIXlZCqmHiZq+W1WUZ8hgBxsBEAK+4QqrUUHhmzLVPLTxoRfLMRCN4jX82RUwlV7z1X6E9YYNRlj-lJK9YVNmcqpAKsZULM19yXRVP5X6wVmLdCJlFWGN1Ub4JkVlYahNJKlWBs4Oi4NSdqy5oLQEgplT-TxsTW46FalxVSwCsVDNZa3nZoRHmjYXb3XcVjiW31EL-XcTJVQKyvr6UwQraiqtqqdDtqQvKIdQ4LXqnQWHepxUEThXtbEdtQt20nqog2ntB645HsSlNPKy4p2JqFtem8Xa92BInOUGghKAMKzErfFWNTQAJPRA+LJkkAMUAA8CnJ6I8kNP9LKppYiFClLEjVJsWVm0+meTEptqHCNNLWS0-82kV62PqOMrWkycM+VmV0uC3FdW+CvBhvZSSEZG1mBx3ghCFKI2UvU1S5GRI12o7Q+hEyKijL6eMmoHDWI7LmSJA5IHqzHIqHBmg5yfGXNbAaVRzHEVan-YBojApM0OuzVZ+D3yyK3ss-poFNienubBQzeVfNWkXo8Y5gDPmeZ+O7VqHF9VtAtH+MS-mMWyD-D0FFtRWweVHCIHwOI-B0hJc7p7eLrTEvJd0Jl7LywbV2u5VG2WfAjrzkihE4Tlg8v-FfjrB8NR+PSX+mbcuKM2veNxoDYBqnE2UJ4w3crOWSsWF6XR9eKnpl9yWbwke2sKMNy2RKgKssnLweUOE7TLW5sQbfokrr8weuCf61Ekrw2bb9DGz5aT7TLojVk2Mpb8xNbFRK+N-Ba2JwrM20fGZNWAn1bnL9coZ6NDZuh52ETrmdU2LLFMFTdnIbZoOxj+GKnR1Roe88EbtsSdwt89OgLUKhYU4uWFyHe3UGIgIGWRox2b6RLvuBh+HX35pRaFqIkrP2dyx+GN3J3TwHq0PfVIXYXMO8YV2FZBv60Gy4fRFfGPxQOdA+wszh9971kI0hQ6jCaDcNxVzjdhCLDfElnjwkHG2BHrOEeppXWmudHJkaL5gjRDP0z2Fc0zXlOzmdTXsf3EIbfw6bNmmP8M49E4CTH8XQD0+heuC4-mgX+xZ8p4zizo5UGLk4GQIgSD-mSOiQGPXFgrfDIY7E5+g3YsJT3NT+4rlTj2zZUSXQ2NdAfejqg+WTWTvmzA8Q9KJFR4fd7McPv2hALsurCY0f6uHHAa5y143j82-nazldJfJwxsD50yE1oI+G5j6CdfsJu+KAN7r4fphHXF-7GXxf9lg-gu35XT35-rubP6v6qwL4Nxn4r4gKX66BI6AEjTAF+ANac4v7c59RnaQGn7f7n4+xwF47KCIG-jIGEGNa16nZtaf5QG4EwFr6D5I4+DNDMDjimBb51aoHMGsFXyUEd7H5f696-7r7Cro5HZcFLDsGoJkFMGJAsGcaRS8H5b8E0GCH4F-7VhJ6SEtTp5gEYFEIxIIjz7axf7e7oE1hKiqhshF5lC97uTXJmZM5aiyzZ4-Sk6oygy56tJzq8BuE0AgxVgkBEAcC7rurWE4zuF0GeH3DtpIa7ZaguECQV5V5sKkAX7d6xBCyxE-q0IJHl6V7V6uHaagjkg6y0KZFFGsBg4l5lBAjJDIgThMTAIkSqyEKdZpRaw3Z-R8R3YWxlZkBpbwLoRxKdGiY9F9S6BxIDGKAPglaxiEJ6AlZTFYZpSGFzHT5TC6APxLGJps7KQxQ8DBxOyLQ5FhGJH5EpE-QG6KwG6yx5HJGq414JERFja4IO59wtHrGvyvFvFXRxLt5KGGH5DfHChTKOGl4tQISGDMAHA2aViMZYRFb3DeGwnIyGYZhR5lCLgsBC6kYBg6JeAmAKS2AdThj+b3DsiBEcD4m5DcAn5IG3DEkw6UlyigDMl0nZwOTYmUC4ltweLBDGC0mN74JNG1J7iLRTZXQPgdALjepcD9CGCxjtr8mhArYNzlp+AsC7R8pYmXhyn6TsmG5ijKCMkwEkRN6G7ImyyQksAwnSmymGh4rg4-HOlmhTJCkunjzET5Dmk0HGmcAkmLzkpmwtQuHakym6kOk0rukekNxuk+nDJen254KOC7o-r2Hh7UkCnMB66ImxBYlIjcnESZmhDAnMgilv4W4fa1H1HeKGRMSik5lbbVz+o4ZNkplgmnwtQlb0SJJcDoSzFEjMmzR9mxJIj9CxhDnogZZZZhLiG8BwKKAEBjnQQi5BlnZLn5pNmaS6DJC4q6DqLMgZYnpzk9kiQDmMobkjoiSXkrn7AeI3krbbm7kdD7kmRTlRozY8ALi8y-jnnIkLj-FxZJlm6tI7l7kHmLkfnFQLkKAobMm5axZDJXQSK6CGjnQHCtaxbuSpYrYsYSnLFOzwYZREjtoA5Nk0Jtaxh05taqmUYZEIhtlvmHmFokDtR4hUAABeUwMFmFSWE5QRbAW5-MYFL5EFCgPKX8fAZKFATy-QpITCpJv4mkcl9WlQcBM2xBd+EGM55pOcciqlK5whqW5pYoUWAEulgU+lCl6lM5MhchbB+CpltlJ5BpOBKl1l6hZWx5shrBmlQBEG3l9l5l+Cel8lalnl7QbFmgXFfl9JkV1A7FXFwVeCloEi7llQNkJAFh9kyg1gWIyiix5mzZrSkl0lrQHZYwqCjBc5PBnxvF7Wx+UR80lZnSM2dlrBCFSWtFI0wOC8qy8ZO2P6+2ohE4NVK4ihDVkGxVVG72rVgVHVZF8ZiyTuyyruwFyZFVlgnBPlDQ8eQq1VO1pgqOZQ0hLl2OCO0MIh2gGO7VSwWqP6UWt1UoNFTV9A3ZXlwIc5aWcR0ezlh1nVcWr19VKWf19l31EW4JE4t2fa6II59CsYugAAVKQNjFWoja+cxQEqVciLJVZZUDxcpXjYZf-ioLFSQaJItnwBZelcTdWE3GTd2GKGzO0hTXvLGGzF2iFeKMwJKE0ETZldlfQLlSIPlXqMNaJtsRsnRfQNjTJXEJtW2OSDwOOAcESWWMkF3mSdmNxPBcaeraiFvrmPWFWiYcIHiMrZwKrYyu2nrcwBrfkK5cWIyrbfbV-orRSCrVvB4i7aiKmTygtv0oJrmULV0Q0LoDMODTyl9kpj9qJgVraopdLQjKbPAaTSsK6ptbLB0CqDIeXKeYMedmsS1Ldn0dsQ+MMSgsXaHbwBMc-GXWlOeXVm1gBMOSoPsASk8UIAELYPxRwK3ehBQASqsUSO8kKvFVQIlROIsdGT8ZQu9ePZPcsONiOYJoSl6FwDhJikKlrPDKPEGNmpMRYIMpsO+QEniK6GQDWdDfmkrihkbfmO7XymGCJkpGveHg7Urs2aJm-RvaufOkRJiqieLabPyoNEtdQqvekO-W2Z7vhdzbzaiboI0EEdQCtBhXWLyMnf9NscyFLSBfcCIaJsSBwOSPUckBjeBKfQFLhO6L1t0TDSUn7HiO7KSEraiZA+vfYFJjOptBgw2Dao7eTRIog7ZJYVg3xF2ClUmh4vaEVZBQEncfUPnahE7GUkSAHfRptsHNLjrQJU0UhSNE+eBSJHhVcacYoxcTwDEUxisN1Ymoo9xYxbg1Q1qLLbjWFYnWaFHfrDoDxTQoppTfJoPQ0acf4DYFw33JpA4y3SY9w60jTXATFswM6iZZhck8lePKFQZXAc8Ofd4sHmFGE2IAzWaGKFYCzcE-k4on4F3eE7GFYJzVIwk55efaQ-UHQxIY5cQxfVfdXdTUTXAVJIJiU07TQ-hIJv0x4zk2JHk1sak8PXXO3cFEcLhokMtKIILEPSs53lqlzc08IYsakyVpM9k55XM105U4YRZWlfzdWKIzlbU6LXoZLVrTLVoGVfLdUZVS1PMavYDCRIYRYMqXkALk7IQkXRONnbnbFDE4eWWJePsX82GI1PGfMUPiQ5fe08MysEixsDPYY9XZWKbnoXoLkxwBrhnJiJVoCbNGi2S0mJ3dYMU4I4oPjGHlwMWYSXoeNspesZtUkzoK0UDWiwK5HVGkM4S3Ji1ri544mho+vBK6MdK4S6AxjMTsbJK99oZMq9-aia6svNHYE4q6bDq6-fyvHdVq89WM+Z2FPOXVQNCHMJXswHwCSXQjkFmUHLgMCw0JEO8maOiNjHoJ4O0CIM5i2hMQ60CnuUCZEJG467hEcOYOiNou8sVLoAADzLAiZ6AkDZvRrWoABMDtwJnyNmpLjQ-QX8NZL4fAKod1YDzIIANGoAQI+wBmlKmW9QoAAAYg63ytqBgOyUjsG0wKGxHsCUG6GoYOO+G4RkPgQHxDyI6zjBgEvcCSO7oHm09MMs20jjSGwI2MzTQEeCQIG85N9Lm98pium9qPm6pFu-m06jwEO0CaAM22QK6NCN6BJFogZkoqABgE6QoMFuW-GwRH8Em2+8KM2zHgyWoK63OAwOfXG1VEu1G6u-DJws20CCdeTPKPyLoBTRkJhL2-2yQIO+yWQVe42+DNdcoKOzO4ERO+iHu23W2-BhiNilXtBH29CAO8W+e665e4+-vdDLe-e-MDR0C2GjoMW7GzQg1ox9QMx9m0J1bMp7O7UjDIu9wMuz0D4IW+u+iJu4Rzu9h2APu3xwO0O+iKB4ROB4m8ZwoAu+hyu4Z1h9Qjh8ygqvHcumR-xxR4J-3Bez9KJ7yroGZ+Z022APQHZMR2cAFwJ1RyNXoGZxYPgs2zGPF54CR9hNZxR7Z82fRxsSG6p7R4sqF2l3iJ55l2AAV5R6AAANRJdBeuVpv1S6BNeSflDVdsA9c0cKeKCgcPtldhvQdmjNuaSceX0lnEiYT1sSTtDOxsBxvghVsT3tO1uLfJshfCdheEc5uPsTcxegDSKiKX0CCWgFeASsl2f6aw6afle0fgc2tL34AOAyAKDetpT6fGkIduvgsEjoiyzzEiRCp5sEc1fyhjcse-ij3ZpZsWD4wWDQjUaJCgAZtncVdXRCp3vI+JCo-o86jY+lnw-ZrdcE9E+NQY8tdo84+OwEm+BFO2ADJRv-cutus+thAn20Kr1yZ-dJGc+dQtbhcABsmwArbPjrHPiHo16xmwxrMqAv7PQvcv0LvRZndgQAA')">controller(
  list(      
    assign("continue", label("fib_done")),
  "fib_loop",
    test(list(op("<"), reg("n"), constant(2))),
    branch(label("immediate_answer")),
    // set up to compute Fib(n-1)
    save("continue"),
    assign("continue", label("afterfib_n_1")),
    save("n"),                     // save old value of n
    assign("n", list(op("-"), reg("n"), constant(1))), // clobber n to n - 1 
    go_to(label("fib_loop")),      // perform recursive call
  "afterfib_n_1",                  // upon return, "val" contains Fib(n-1)
    restore("n"),
    restore("continue"),
    // set up to compute Fib(n-2)
    assign("n", list(op("-"), reg("n"), constant(2))),
    save("continue"),
    assign("continue", label("afterfib_n_2")),
    save("val"),                   // save Fib(n-1)
    go_to(label("fib_loop")),
  "afterfib_n_2",                  // upon return, val is Fib(n-2)
    assign("n", reg("val")),       // n now contains Fib(n-2)
    restore("val"),                // val now contains Fib(n-1)
    restore("continue"),
    assign("val",                  // Fib(n-1) + Fib(n-2)
      list(op("+"), reg("val"), reg("n"))),
    go_to(reg("continue")),        // return to caller, answer in val
  "immediate_answer",
    assign("val", reg("n")),       // base case: Fib(n) = n
    go_to(reg("continue")),
  "fib_done"))
</pre></div></div>

      
	  
      
	  
      
    <FIGURE><div class='snippet' id='javascript_102_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0MuigJxoBs2BTZgCgGdOARyKdynAJSgA3gEhcoBaGacKRZvTZU+FHgCJGJFuy7NdAGlADhoshIDcuAL6FSlWvQNGO3APpWRYjyerN7MklLyisqq6qAAFpwAhgAmPBSJVGxBTCEm4uIOzi7k1HSgAOYqPsrlWhTcPAC2iWRxVCScFjU+JImNEtKRCtFq9M2t7Zx6lRTVnLXa3LriPN29-QVO+MQl7qAUAJ4ADlPt2sxEbnThSiqj8UmpZyyXpSQFoEU7Vxo0NADWRCOPiOzCojX4B0aACN2BYaCdmIk3nxwkMGHRtKAAG6JNigAC8oESfD4NDIkJhcNACO4yPcqIciluMXoWh8pGSnAIk1SuLY4nRzMUAH5QNxWLw+FDYWwLLpSP8SDQAO70WlIt6gAC02uJpM4MK4yyFwtAAC4Hik0hksvz8oVtq4tWw-oDgWxEtDOFlPd62HwLH6fT0+gMIsyDFj+YT9WSKcG2KH+kGvT7GeiRrF2ZzubyePbTcKxRKaLxE8nOqAFSQuTyOslQImdXqSQIjZwTWbhZb0pkC3jNl9nXtmv9OCCwY0qNRsRPOAAPYHcniLo4WcZtDqp-2owbMqgEUA8dlR9KGHxr1dL-L77tnhixs+JC9rnz8kTXo6bbss+48SQCQAPgYJlFEccUA04UBD2PdkKyvNdbwje9MQoGCSG0PhY1dAEgR8RMeETQMmzTJM30IpCf27LN6AAwkQOePgwIUCD02g2CTz4OYFnqZhLyXL9kKLDFMPQ5hYxmHi6gaTdJi6eYZP4t8aiE6izVo49AJAqTPFECg+FWD50TYqC7zNUteDXeVFWVNVxSXZRST2Q4ThbONDWhY11M+LZih+UAxwnDV6ToATlwIL8NxaLcq2I+FEVCzC0UjNCaSOHC3Xw0FwR4EK3nCnwESEhK6RRHyH0SHZsKJZojlXBjAsScdJ3BGcqDnQqVyrOTt1I3dxDMETfzNfL3EKkLa0MqiWL-WJ6OA4kjiONgDh8doOVrbhVvacofAAK0SXE+DIMEjh0YaRsUBFovqo9FsiwbiWqh0-O+LU2yocoSFWRTFn49YqzJNRbBSqI7liTRtD0T7vvMW5eN8QGLGB5hQcdd69lhkgeMrHhsfWsSLh+MHhgh+gEmtPssgJ55ibeV7nExsoCY-edBNponXncG5M3Jq1Umpm1+0585ueuRmnV2Mogp8AmV2eaKJj6+L0rKhkLCOMhSdErF0mYGZJKqGolKaGL5LjL6cbWMMTzE17UrEnE8REcLY1Zl32fq54KrStmfB2QkRPZMawqvf2kJEsVZdDnG3xXCOlyV2Kd3TUrNQZQVf0tWWcunWcvcvSLE-XJrlbisiM2ZTSFpAlCru7ARZj0wxDP1mYLH9nYAJ8hvmRSXExBBCkteMvvhUcR1-I+5JB9sYeeFH8zLCqFuDMXsgLCF3SmH0wzR4dUA3pHGXmoneptCLu3tGTi3VdjkiCE9cpNe15eHwMZJ2rKIkL+bugv5vGvhQHynEQ6JQKleT+393g60dliaBBVA61TPkVCB4146RUQe4Ia488Hdl6hXXc6ckpVxovzWuy98HMibj4Nehkn6JBfqJQB41u4O2oWaAeL555aw3mPTh4FZqmQEFQxQllgHymhCkfYnAsR03FvQXUHkOzLGEcfaW9A-7ZFrDAm4mkoY6F0H-eG2Drh2F8szLRcj-66KAX-QmYsSbL00pTQWto0g2McS8EmxlhyaKai1aESJyBxCvorMuKd+pp1AIw5hS96663QlyLERJgk8LCSknQPtZpgO4ghQSWThK-gfExTKeEPRkSIpXVO5ElwESqUU3u4NWRaUaokwRMEjw8B3oYPePA4nFM6Y3Veu9W4bwsExZpnCRHQQ6cMhQ3Ch58NHrNTpzgFmTxMpBUR8yFASIiboaRjZ0mhIwk4rUyi2yeW8uo-xAVTmtGqf6fR-NDF6EeXEeGiYPhMxPvQT5Pgsk8EBQo5xiTXGPGFlkUFXNfEWI0QFdk6RyiVGSAROo2RGhHDoPpLeCQfAop1ppdkRwMi8EYNi3FhhJAADJaUCyxTijoNLCQEl-gSlFU8rEIx4IDV5rT3m6BqPDflFi-kBPZCbf64UhLSDmmybiKK0UYuhtZasIrfnTz2NKvihVVJIXlZCqmHiZq+W1WUZ8hgBxsBEAK+4QqrUUHhmzLVPLTxoRfLMRCN4jX82RUwlV7z1X6E9YYNRlj-lJK9YVNmcqpAKsZULM19yXRVP5X6wVmLdCJlFWGN1Ub4JkVlYahNJKlWBs4Oi4NSdqy5oLQEgplT-TxsTW46FalxVSwCsVDNZa3nZoRHmjYXb3XcVjiW31EL-XcTJVQKyvr6UwQraiqtqqdDtqQvKIdQ4LXqnQWHepxUEThXtbEdtQt20nqog2ntB645HsSlNPKy4p2JqFtem8Xa92BInOUGghKAMKzErfFWNTQAJPRA+LJkkAMUAA8CnJ6I8kNP9LKppYiFClLEjVJsWVm0+meTEptqHCNNLWS0-82kV62PqOMrWkycM+VmV0uC3FdW+CvBhvZSSEZG1mBx3ghCFKI2UvU1S5GRI12o7Q+hEyKijL6eMmoHDWI7LmSJA5IHqzHIqHBmg5yfGXNbAaVRzHEVan-YBojApM0OuzVZ+D3yyK3ss-poFNienubBQzeVfNWkXo8Y5gDPmeZ+O7VqHF9VtAtH+MS-mMWyD-D0FFtRWweVHCIHwOI-B0hJc7p7eLrTEvJd0Jl7LywbV2u5VG2WfAjrzkihE4Tlg8v-FfjrB8NR+PSX+mbcuKM2veNxoDYBqnE2UJ4w3crOWSsWF6XR9eKnpl9yWbwke2sKMNy2RKgKssnLweUOE7TLW5sQbfokrr8weuCf61Ekrw2bb9DGz5aT7TLojVk2Mpb8xNbFRK+N-Ba2JwrM20fGZNWAn1bnL9coZ6NDZuh52ETrmdU2LLFMFTdnIbZoOxj+GKnR1Roe88EbtsSdwt89OgLUKhYU4uWFyHe3UGIgIGWRox2b6RLvuBh+HX35pRaFqIkrP2dyx+GN3J3TwHq0PfVIXYXMO8YV2FZBv60Gy4fRFfGPxQOdA+wszh9971kI0hQ6jCaDcNxVzjdhCLDfElnjwkHG2BHrOEeppXWmudHJkaL5gjRDP0z2Fc0zXlOzmdTXsf3EIbfw6bNmmP8M49E4CTH8XQD0+heuC4-mgX+xZ8p4zizo5UGLk4GQIgSD-mSOiQGPXFgrfDIY7E5+g3YsJT3NT+4rlTj2zZUSXQ2NdAfejqg+WTWTvmzA8Q9KJFR4fd7McPv2hALsurCY0f6uHHAa5y143j82-nazldJfJwxsD50yE1oI+G5j6CdfsJu+KAN7r4fphHXF-7GXxf9lg-gu35XT35-rubP6v6qwL4Nxn4r4gKX66BI6AEjTAF+ANac4v7c59RnaQGn7f7n4+xwF47KCIG-jIGEGNa16nZtaf5QG4EwFr6D5I4+DNDMDjimBb51aoHMGsFXyUEd7H5f696-7r7Cro5HZcFLDsGoJkFMGJAsGcaRS8H5b8E0GCH4F-7VhJ6SEtTp5gEYFEIxIIjz7axf7e7oE1hKiqhshF5lC97uTXJmZM5aiyzZ4-Sk6oygy56tJzq8BuE0AgxVgkBEAcC7rurWE4zuF0GeH3DtpIa7ZaguECQV5V5sKkAX7d6xBCyxE-q0IJHl6V7V6uHaagjkg6y0KZFFGsBg4l5lBAjJDIgThMTAIkSqyEKdZpRaw3Z-R8R3YWxlZkBpbwLoRxKdGiY9F9S6BxIDGKAPglaxiEJ6AlZTFYZpSGFzHT5TC6APxLGJps7KQxQ8DBxOyLQ5FhGJH5EpE-QG6KwG6yx5HJGq414JERFja4IO59wtHrGvyvFvFXRxLt5KGGH5DfHChTKOGl4tQISGDMAHA2aViMZYRFb3DeGwnIyGYZhR5lCLgsBC6kYBg6JeAmAKS2AdThj+b3DsiBEcD4m5DcAn5IG3DEkw6UlyigDMl0nZwOTYmUC4ltweLBDGC0mN74JNG1J7iLRTZXQPgdALjepcD9CGCxjtr8mhArYNzlp+AsC7R8pYmXhyn6TsmG5ijKCMkwEkRN6G7ImyyQksAwnSmymGh4rg4-HOlmhTJCkunjzET5Dmk0HGmcAkmLzkpmwtQuHakym6kOk0rukekNxuk+nDJen254KOC7o-r2Hh7UkCnMB66ImxBYlIjcnESZmhDAnMgilv4W4fa1H1HeKGRMSik5lbbVz+o4ZNkplgmnwtQlb0SJJcDoSzFEjMmzR9mxJIj9CxhDnogZZZZhLiG8BwKKAEBjnQQi5BlnZLn5pNmaS6DJC4q6DqLMgZYnpzk9kiQDmMobkjoiSXkrn7AeI3krbbm7kdD7kmRTlRozY8ALi8y-jnnIkLj-FxZJlm6tI7l7kHmLkfnFQLkKAobMm5axZDJXQSK6CGjnQHCtaxbuSpYrYsYSnLFOzwYZREjtoA5Nk0Jtaxh05taqmUYZEIhtlvmHmFokDtR4hUAABeUwMFmFSWE5QRbAW5-MYFL5EFCgPKX8fAZKFATy-QpITCpJv4mkcl9WlQcBM2xBd+EGM55pOcciqlK5whqW5pYoUWAEulgU+lCl6lM5MhchbB+CpltlJ5BpOBKl1l6hZWx5shrBmlQBEG3l9l5l+Cel8lalnl7QbFmgXFfl9JkV1A7FXFwVeCloEi7llQNkJAFh9kyg1gWIyiix5mzZrSkl0lrQHZYwqCjBc5PBnxvF7Wx+UR80lZnSM2dlrBCFSWtFI0wOC8qy8ZO2P6+2ohE4NVK4ihDVkGxVVG72rVgVHVZF8ZiyTuyyruwFyZFVlgnBPlDQ8eQq1VO1pgqOZQ0hLl2OCO0MIh2gGO7VSwWqP6UWt1UoNFTV9A3ZXlwIc5aWcR0ezlh1nVcWr19VKWf19l31EW4JE4t2fa6II59CsYugAAVKQNjFWoja+cxQEqVciLJVZZUDxcpXjYZf-ioLFSQaJItnwBZelcTdWE3GTd2GKGzO0hTXvLGGzF2iFeKMwJKE0ETZldlfQLlSIPlXqMNaJtsRsnRfQNjTJXEJtW2OSDwOOAcESWWMkF3mSdmNxPBcaeraiFvrmPWFWiYcIHiMrZwKrYyu2nrcwBrfkK5cWIyrbfbV-orRSCrVvB4i7aiKmTygtv0oJrmULV0Q0LoDMODTyl9kpj9qJgVraopdLQjKbPAaTSsK6ptbLB0CqDIeXKeYMedmsS1Ldn0dsQ+MMSgsXaHbwBMc-GXWlOeXVm1gBMOSoPsASk8UIAELYPxRwK3ehBQASqsUSO8kKvFVQIlROIsdGT8ZQu9ePZPcsONiOYJoSl6FwDhJikKlrPDKPEGNmpMRYIMpsO+QEniK6GQDWdDfmkrihkbfmO7XymGCJkpGveHg7Urs2aJm-RvaufOkRJiqieLabPyoNEtdQqvekO-W2Z7vhdzbzaiboI0EEdQCtBhXWLyMnf9NscyFLSBfcCIaJsSBwOSPUckBjeBKfQFLhO6L1t0TDSUn7HiO7KSEraiZA+vfYFJjOptBgw2Dao7eTRIog7ZJYVg3xF2ClUmh4vaEVZBQEncfUPnahE7GUkSAHfRptsHNLjrQJU0UhSNE+eBSJHhVcacYoxcTwDEUxisN1Ymoo9xYxbg1Q1qLLbjWFYnWaFHfrDoDxTQoppTfJoPQ0acf4DYFw33JpA4y3SY9w60jTXATFswM6iZZhck8lePKFQZXAc8Ofd4sHmFGE2IAzWaGKFYCzcE-k4on4F3eE7GFYJzVIwk55efaQ-UHQxIY5cQxfVfdXdTUTXAVJIJiU07TQ-hIJv0x4zk2JHk1sak8PXXO3cFEcLhokMtKIILEPSs53lqlzc08IYsakyVpM9k55XM105U4YRZWlfzdWKIzlbU6LXoZLVrTLVoGVfLdUZVS1PMavYDCRIYRYMqXkALk7IQkXRONnbnbFDE4eWWJePsX82GI1PGfMUPiQ5fe08MysEixsDPYY9XZWKbnoXoLkxwBrhnJiJVoCbNGi2S0mJ3dYMU4I4oPjGHlwMWYSXoeNspesZtUkzoK0UDWiwK5HVGkM4S3Ji1ri544mho+vBK6MdK4S6AxjMTsbJK99oZMq9-aia6svNHYE4q6bDq6-fyvHdVq89WM+Z2FPOXVQNCHMJXswHwCSXQjkFmUHLgMCw0JEO8maOiNjHoJ4O0CIM5i2hMQ60CnuUCZEJG467hEcOYOiNou8sVLoAADzLAiZ6AkDZvRrWoABMDtwJnyNmpLjQ-QX8NZL4fAKod1YDzIIANGoAQI+wBmlKmW9QoAAAYg63ytqBgOyUjsG0wKGxHsCUG6GoYOO+G4RkPgQHxDyI6zjBgEvcCSO7oHm09MMs20jjSGwI2MzTQEeCQIG85N9Lm98pium9qPm6pFu-m06jwEO0CaAM22QK6NCN6BJFogZkoqABgE6QoMFuW-GwRH8Em2+8KM2zHgyWoK63OAwOfXG1VEu1G6u-DJws20CCdeTPKPyLoBTRkJhL2-2yQIO+yWQVe42+DNdcoKOzO4ERO+iHu23W2-BhiNilXtBH29CAO8W+e665e4+-vdDLe-e-MDR0C2GjoMW7GzQg1ox9QMx9m0J1bMp7O7UjDIu9wMuz0D4IW+u+iJu4Rzu9h2APu3xwO0O+iKB4ROB4m8ZwoAu+hyu4Z1h9Qjh8ygqvHcumR-xxR4J-3Bez9KJ7yroGZ+Z022APQHZMR2cAFwJ1RyNXoGZxYPgs2zGPF54CR9hNZxR7Z82fRxsSG6p7R4sqF2l3iJ55l2AAV5R6AAANRJdBeuVpv1S6BNeSflDVdsA9c0cKeKCgcPtldhvQdmjNuaSceX0lnEiYT1sSTtDOxsBxvghVsT3tO1uLfJshfCdheEc5uPsTcxegDSKiKX0CCWgFeASsl2f6aw6afle0fgc2tL34AOAyAKDetpT6fGkIduvgsEjoiyzzEiRCp5sEc1fyhjcse-ij3ZpZsWD4wWDQjUaJCgAZtncVdXRCp3vI+JCo-o86jY+lnw-ZrdcE9E+NQY8tdo84+OwEm+BFO2ADJRv-cutus+thAn20Kr1yZ-dJGc+dQtbhcABsmwArbPjrHPiHo16xmwxrMqAv7PQvcv0LvRZndgQAA')">controller(
  list(      
    assign("continue", label("fib_done")),
  "fib_loop",
    test(list(op("<"), reg("n"), constant(2))),
    branch(label("immediate_answer")),
    // set up to compute Fib(n-1)
    save("continue"),
    assign("continue", label("afterfib_n_1")),
    save("n"),                     // save old value of n
    assign("n", list(op("-"), reg("n"), constant(1))), // clobber n to n - 1 
    go_to(label("fib_loop")),      // perform recursive call
  "afterfib_n_1",                  // upon return, "val" contains Fib(n-1)
    restore("n"),
    restore("continue"),
    // set up to compute Fib(n-2)
    assign("n", list(op("-"), reg("n"), constant(2))),
    save("continue"),
    assign("continue", label("afterfib_n_2")),
    save("val"),                   // save Fib(n-1)
    go_to(label("fib_loop")),
  "afterfib_n_2",                  // upon return, val is Fib(n-2)
    assign("n", reg("val")),       // n now contains Fib(n-2)
    restore("val"),                // val now contains Fib(n-1)
    restore("continue"),
    assign("val",                  // Fib(n-1) + Fib(n-2)
      list(op("+"), reg("val"), reg("n"))),
    go_to(reg("continue")),        // return to caller, answer in val
  "immediate_answer",
    assign("val", reg("n")),       // base case: Fib(n) = n
    go_to(reg("continue")),
  "fib_done"))
</pre></div></div>
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./5.1.4.html#fig_5.12">Figure 5.12 </a></b>
	    Controller for a machine to compute Fibonacci numbers.
	    
	  </div>
    </FIGURE>
  
  </p></div>

  
    <div class="permalink">
    <a name="ex_5.4" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.4">Exercise 5.4 </a></b> 
  
    
    Specify register machines that implement each of the following
    
      
      functions.
    
    For each machine, write a controller instruction sequence
    and draw a diagram showing the data paths.
    <OL type="a">
      <LI>
	Recursive exponentiation:
	
	<div class='snippet' id='javascript_102_8_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0AUwA8AHCgCgCMAaUEgSlABvXKDGgATgwpEJ9egF4loAAyjxG8QH5QGdZo0AuUJ1AAqRqw48+oALS7+AblwBffMzbsAzL2zOgA')">function expt(b, n) {
    return n === 0
           ? 1
           : b * expt(b, n - 1);
}
</pre></div></div>
      </LI>
      <LI>
	Iterative exponentiation:
	
	<div class='snippet' id='javascript_102_9_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQEY0BYBQuAzAVwDsBjAFwEsB7E0AUwA8AHCgCgCMAaUEgSlABvAJChQuceOLlqdRqwoB9KhQYAndmRqk163i3U0AJkUqChkqdfUMKRdfW26NoALwfQABivW-oAH5QQxMzCl9-KQAuBTYVPS0dEj1QAFpQDF5OUAAqYKNTcwBuCIBfCNt7R1jlVQ12El4MfhLy3GY2dgBmXmwWoA')">function expt(b, n) {	  
    function expt_iter(counter, product) {
        return counter === 0
            ? product
            : expt_iter(counter - 1, b * product);
    }
    return expt_iter(n, 1);
}
</pre></div></div>
      </LI>
    </OL>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_102_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_102_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.5" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.5">Exercise 5.5 </a></b> 
  
    Hand-simulate the factorial and Fibonacci machines, using some
    nontrivial input (requiring execution of at least one recursive call).
    Show the contents of the stack at each significant point in the
    execution.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_102_2_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_102_2_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.6" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.6">Exercise 5.6 </a></b> 
  
    Ben Bitdiddle observes that the Fibonacci machine's controller sequence
    has an extra <kbd>save</kbd> and an extra
    <kbd>restore</kbd>, which can be removed to make a faster
    machine.  Where are these instructions?
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_102_3_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_102_3_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

  
  
  
<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    One might argue that we don't need to save the old
    <kbd>n</kbd>; after we decrement it and solve the
    subproblem, we could simply increment it to recover the old value.  Although
    this strategy works for factorial, it cannot work in general, since the old
    value of a register cannot always be computed from the new one.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    In section&nbsp;<REF NAME="sec:storage-allocation"><a class="superscript" id="5.1.4-sec-link-5.3" href="./5.3.html">5.3</a></REF> we
    will see how to implement a stack in terms of more primitive
    operations.
    </FOOTNOTE></div>

    
</div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./5.1.3.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='104' href='./5.1.5.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      5.1.4&nbsp;&nbsp;
    Using a Stack to Implement Recursion
  
    </div>
    <script> var chapter_id = 103; </script>
    <script> var chapter_path = "chapters/5.1.4.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>